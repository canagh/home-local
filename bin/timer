#!/usr/bin/bash
usage () {
    echo 'usage: '$0' [-h] [-i ICON] [-c CATEGORY] TIME MESSAGE...' 1>&2
}
icon=()
category=()
while getopts i:c:h OPT ; do
    case $OPT in
        i ) icon=('-i' "$OPTARG") ;;
        c ) category=('-c' "$CATEGORY") ;;
        h ) usage ; exit ;;
    esac
done
shift $((OPTIND - 1))
time="$1"
shift
if echo "$time" | grep -q '^[[:digit:]]\+$' ; then
    time="$time"'s'
fi
if [[ $# == 0 ]] ; then
    message='timer: '"$time"' has passed'
else
    message="$*"
fi
( sleep -- "$time" && notify-send "${icon[@]}" "${category[@]}" -- "$message" ) &
