#!/usr/bin/python3

import argparse

parser = argparse.ArgumentParser()
parser.add_argument('files', metavar='FILE', nargs='+')
parser.add_argument('format', metavar='FORMAT')
args = parser.parse_args()

import os

def aformat(fmt, x):
    if fmt.find('{}') != -1:
        return fmt.replace('{}',x)
    if fmt.startswith('.'):
        return x + fmt
    return fmt

for fileh in args.files:
    dirn, basen = os.path.split(fileh)
    os.rename(fileh, os.path.join(dirn, aformat(args.format, basen)))
