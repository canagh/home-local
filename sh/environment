#!/bin/bash

export LANG=en_US.UTF-8
#export LANG=C

inpath() { which "$@" >/dev/null 2>&1 ; }
not() { "$@" ; [ $? != 0 ] ; }

if   inpath vim  ; then export VISUAL=vim
elif inpath nvim ; then export VISUAL=nvim
elif inpath vi   ; then export VISUAL=vi
elif inpath nano ; then export VISUAL=nano
fi
export EDITOR=$VISUAL
export PAGER=less
if   inpath w3m  ; then export BROWSER=w3m
elif inpath lynx ; then export BROWSER=lynx
fi
export CC=gcc
export CXX=g++

export PATH="$HOME"/share/bin:"$PATH"
export PATH="$HOME"/bin:"$PATH"

# python
export PYTHONSTARTUP="$HOME"/share/python/startup.py

# haskell
export PATH="$HOME/.cabal/bin":"$PATH"

eval "$(direnv hook $0)"

# javascript
## nvm
if [ ! "$NVM_DIR" ] ; then
    f="$HOME"/lib/nvm/nvm.sh
    if [ -f "$f" ] ; then
        NVM_DIR="$HOME/.nvm"
        source "$f"
        nvm use v0.10.21 >/dev/null
    fi
    unset f
fi

# android
export ANDROID_HOME=$HOME/lib/adt/sdk
export PATH=$ANDROID_HOME/platform-tools:$ANDROID_HOME/tools:$PATH
export ANDROID_NDK_HOME=$HOME/lib/adt/ndk
export PATH=$ANDROID_NDK_HOME:$PATH

# make PATH unique
if inpath zsh ; then
    export PATH="`zsh -fc 'typeset -U path ; echo $PATH'`"
fi
